# Coverage Baseline (2025-10-31)

Scope: current crate `mdrcp` at /home/md/language/mdrcp
Command: `cargo llvm-cov --summary-only` (ran on 2025-10-31)

Summary
- File: src/main.rs
- Regions: 87.48%
- Functions: 78.57%
- Lines: 85.44%

Observed Gaps (line numbers from src/main.rs)
- Program entry: lines 8–28 (error path printing + exit) not executed by tests.
- Windows-only branches counted on Linux build:
  - `find_built_executables` exe formatting branch: lines 93–97.
  - `run` exe formatting branch: lines 143–147.
  - `default_target_dir` Windows branch: line 108.
- Error-only contexts not exercised:
  - `No packages or bins found` error: line 87.
  - Failed to create target directory context closure: lines 136–139.
  - Copy failure context closure: lines 152–158.
- Manifest parsing path-stem fallback untested:
  - When `[[bin]]` entry has no `name` but has `path`: lines 39–42.
- Cosmetic: some closing brace lines show as uncovered in LCOV (79–83), which is non-actionable.

Artifacts
- LCOV file: coverage.lcov (generated locally in repo root).
- Test run: 11 tests, all passing.

Constraints and Assumptions
- OS: non-Windows; coverage is measured on Linux. Runtime `cfg!(windows)` compiles both branches and penalizes coverage; we will refactor to compile-time `#[cfg]` to avoid counting unreachable Windows code.
- No external network installs; using preinstalled cargo-llvm-cov.

Baseline Conclusion
- Line coverage at 85.44% with clear, fixable gaps. Primary improvements come from refactoring OS branches to compile out on this platform and adding focused tests for error-only paths and manifest path-stem logic.
