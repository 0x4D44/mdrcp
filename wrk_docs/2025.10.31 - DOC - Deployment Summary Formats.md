# Deployment Summary Formats

The `deploy-tool` CLI can emit deployment results in either colorful text (default) or JSON output designed for automation. Control the behaviour with the `--summary` flag:

| Flag value    | Description                                                 |
|---------------|-------------------------------------------------------------|
| `text`        | (Default) Colorized human-readable output. Respects `--quiet` to suppress logs. |
| `json`        | Emits a single compact JSON object to stdout.               |
| `json-pretty` | Emits the same JSON payload, formatted with indentation.    |

When `--summary json` or `--summary json-pretty` is used, warnings (for example redundant `--target` overrides) are still written to stderr so CI pipelines can surface them without parsing stdout.

## JSON Schema

```json
{
  "status": "ok",
  "copied_count": 2,
  "target_dir": "/home/user/.local/bin",
  "override_used": true,
  "copied_binaries": ["demo", "helper"],
  "warnings": ["Resolved target matches default destination; override may be redundant."]
}
```

Field descriptions:

- `status`: Always `"ok"` for successful runs. Non-zero exits signal failure instead of JSON output.
- `copied_count`: Number of executables copied during this run.
- `target_dir`: Absolute path of the deployment destination after resolving overrides.
- `override_used`: Indicates whether `--target` was supplied.
- `copied_binaries`: List of executable base names (without `.exe`).
- `warnings`: Strings describing non-fatal issues detected during the run.

## Usage Examples

```bash
# Quiet JSON output for CI pipelines
 deploy-tool --quiet --summary json

# Pretty JSON plus warnings on stderr
 deploy-tool --summary json-pretty --target dist/bin
```

Remember to run `cargo build --release` before invoking the tool so release binaries exist in `target/release/`.
